<div class="container">
  <app-spinner [loading]="loading"></app-spinner>

  <form [formGroup]="propertyForm" (ngSubmit)="handlePropertyFormSubmit()">
    <div class="accordion mb-4" id="listingAccordion">
      <div class="accordion-item">
        <h2 class="accordion-header" id="headingListing">
          <button
            class="accordion-button"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#collapseListing"
            aria-expanded="true"
            aria-controls="collapseListing"
          >
            Listing Details
          </button>
        </h2>
        <div
          id="collapseListing"
          class="accordion-collapse collapse show"
          aria-labelledby="headingListing"
        >
          <div class="accordion-body">
            <div class="mb-3">
              <label for="name" class="form-label">Property Name</label>
              <input
                type="text"
                id="name"
                class="form-control"
                formControlName="name"
                placeholder="Enter property name"
              />
              <div
                *ngIf="
                  propertyForm.get('name')?.invalid &&
                  propertyForm.get('name')?.touched
                "
                class="text-danger"
              >
                Property name is required.
              </div>
            </div>

            <div class="mb-3">
              <label for="description" class="form-label">Description</label>
              <textarea
                id="description"
                class="form-control"
                formControlName="description"
                placeholder="Enter description"
              ></textarea>
              <div
                *ngIf="
                  propertyForm.get('description')?.invalid &&
                  propertyForm.get('description')?.touched
                "
                class="text-danger"
              >
                Description is required.
              </div>
            </div>

            <div class="mb-3">
              <label for="image" class="form-label">Image URL</label>
              <input
                type="url"
                id="image"
                class="form-control"
                formControlName="image"
                placeholder="Enter image URL"
              />
              <div
                *ngIf="
                  propertyForm.get('image')?.invalid &&
                  propertyForm.get('image')?.touched
                "
                class="text-danger"
              >
                Image URL is required.
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="accordion mb-4" id="propertyInfoAccordion">
      <div class="accordion-item">
        <h2 class="accordion-header" id="headingPropertyInfo">
          <button
            class="accordion-button collapsed"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#collapsePropertyInfo"
            aria-expanded="false"
            aria-controls="collapsePropertyInfo"
          >
            Property Info
          </button>
        </h2>
        <div
          id="collapsePropertyInfo"
          class="accordion-collapse collapse"
          aria-labelledby="headingPropertyInfo"
        >
          <div class="accordion-body">
            <div class="mb-3">
              <label for="city" class="form-label">City</label>
              <input
                type="text"
                id="city"
                class="form-control"
                formControlName="city"
                placeholder="Enter city"
              />
              <div
                *ngIf="
                  propertyForm.get('city')?.invalid &&
                  propertyForm.get('city')?.touched
                "
                class="text-danger"
              >
                City is required.
              </div>
            </div>

            <div class="mb-3">
              <label for="state" class="form-label">State</label>
              <input
                type="text"
                id="state"
                class="form-control"
                formControlName="state"
                placeholder="Enter state"
              />
              <div
                *ngIf="
                  propertyForm.get('state')?.invalid &&
                  propertyForm.get('state')?.touched
                "
                class="text-danger"
              >
                State is required.
              </div>
            </div>

            <div class="mb-3">
              <label for="country" class="form-label">Country</label>
              <input
                type="text"
                id="country"
                class="form-control"
                formControlName="country"
                placeholder="Enter country"
              />
              <div
                *ngIf="
                  propertyForm.get('country')?.invalid &&
                  propertyForm.get('country')?.touched
                "
                class="text-danger"
              >
                Country is required.
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <button
      type="submit"
      class="btn btn-primary"
      [disabled]="propertyForm.invalid"
    >
      {{ property() ? "Update Property" : "Create Property" }}
    </button>
  </form>
</div>
